<div class="plano-form" [class.loading]="loading">
  <h2>Nova Sessão</h2>
  
  <div *ngIf="error" class="error-message">{{ error }}</div>

  <form [formGroup]="sessaoForm" (ngSubmit)="criarSessao()">
    <div class="form-group">
      <label for="nomeUtente">Nome do Utente*</label>
      <input 
        id="nomeUtente" 
        type="text" 
        formControlName="nomeUtente"
        placeholder="Escreva o nome do utente">
      <div class="error-message" *ngIf="sessaoForm.get('nomeUtente')?.errors?.['required'] && sessaoForm.get('nomeUtente')?.touched">
        O nome do utente é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="titulo">Título da Sessão*</label>
      <input 
        id="titulo" 
        type="text" 
        formControlName="titulo"
        placeholder="Escreva o título da sessão">
      <div class="error-message" *ngIf="sessaoForm.get('titulo')?.errors?.['required'] && sessaoForm.get('titulo')?.touched">
        O título é obrigatório
      </div>
    </div>

    <div class="form-group">
      <label for="dataInicio">Data de Início*</label>
      <input 
        id="dataInicio" 
        type="datetime-local" 
        formControlName="dataInicio">
      <div class="error-message" *ngIf="sessaoForm.get('dataInicio')?.errors?.['required'] && sessaoForm.get('dataInicio')?.touched">
        A data de início é obrigatória
      </div>
    </div>

    <div class="form-group">
      <label for="duracao">Duração (minutos)*</label>
      <input 
        id="duracao" 
        type="number" 
        formControlName="duracao"
        placeholder="Escreva a duração em minutos">
      <div class="error-message" *ngIf="sessaoForm.get('duracao')?.errors?.['required'] && sessaoForm.get('duracao')?.touched">
        A duração é obrigatória
      </div>
    </div>

    <div class="form-group">
      <label for="local">Local*</label>
      <input 
        id="local" 
        type="text" 
        formControlName="local"
        placeholder="Escreva o local da sessão">
      <div class="error-message" *ngIf="sessaoForm.get('local')?.errors?.['required'] && sessaoForm.get('local')?.touched">
        O local é obrigatório
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn-secondary" (click)="activeModal.dismiss()">Cancelar</button>
      <button type="submit" class="btn-primary" [disabled]="!sessaoForm.valid || loading">
        {{ loading ? 'A criar...' : 'Criar Sessão' }}
      </button>
    </div>
  </form>
</div>